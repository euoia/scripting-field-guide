<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shell Field Guide</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Raimon Grau" />
<meta name="keywords" content="bash zsh shell" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Shell Field Guide</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org4c93780">1. Introduction</a></li>
<li><a href="#org51779a0">2. shell</a></li>
<li><a href="#orgf9fad1a">3. Level</a></li>
<li><a href="#org6e8e39f">4. bash</a>
<ul>
<li><a href="#orgb509cc6">4.1. Use Shellcheck</a></li>
</ul>
</li>
<li><a href="#org6fb003c">5. Basics</a>
<ul>
<li><a href="#orgb4b99eb">5.1. Overview</a></li>
<li><a href="#orgfeb2a18">5.2. Booleans and Conditionals</a></li>
<li><a href="#orged5671e">5.3. Functions</a></li>
<li><a href="#org0d8652b">5.4. Variables</a></li>
<li><a href="#org0728a46">5.5. Interpolation</a></li>
</ul>
</li>
<li><a href="#org07f056a">6. interactive</a>
<ul>
<li><a href="#orgec830c3">6.1. Save your small scripts</a></li>
<li><a href="#orge93398b">6.2. Increased Interactivity</a></li>
<li><a href="#orgdd74676">6.3. Aliases</a></li>
<li><a href="#org8a2ae9b">6.4. functions can generate aliases</a></li>
<li><a href="#org74a2195">6.5. Override (advise) common functions</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org4c93780" class="outline-2">
<h2 id="org4c93780"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
This booklet is intended to be a catalog of tricks and techniques
you should be using if you're doing any sort of scripting. I'll try
to keep the rethoric to the very minimal because that way you can
enjoy the content in less time.
</p>

<p>
You probably have some amount of sh/bash/zsh in your stack that
probably started as 1 off scripts, and later on started growing and
were copypasted everywhere in your pipelines, or your coworkers use
for their own use (with some variations), etc. Those scripts are
very difficult to kill and they have a very high mutation rate.
</p>
</div>
</div>
<div id="outline-container-org51779a0" class="outline-2">
<h2 id="org51779a0"><span class="section-number-2">2</span> shell</h2>
<div class="outline-text-2" id="text-2">
<p>
No matter if you use Linux, Mac, or Win, you should be living most
of the time in a shell to enjoy the content shown here. Some value
comes from the automated scripts, and some comes from the daily
usage and refinement of your helper functions, aliases, etc.
</p>

<p>
In general the examples here are ment to run in Bash or Zsh, which
are compatible for the most part.
</p>
</div>
</div>
<div id="outline-container-orgf9fad1a" class="outline-2">
<h2 id="orgf9fad1a"><span class="section-number-2">3</span> Level</h2>
<div class="outline-text-2" id="text-3">
<p>
These examples are based on non-trivial real world code I've written
that I haven't seen applied in many places over the net. Some of the
snippets are stolen from public repos.
</p>
</div>
</div>
<div id="outline-container-org6e8e39f" class="outline-2">
<h2 id="org6e8e39f"><span class="section-number-2">4</span> bash</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgb509cc6" class="outline-3">
<h3 id="orgb509cc6"><span class="section-number-3">4.1</span> Use Shellcheck</h3>
<div class="outline-text-3" id="text-4-1">
<p>
First, let's start with the low hanging fruit.
</p>

<p>
A lot of the most common errors we usually make are well known
ones. And in fact, we all usually fail in similar ways. Bash is
known for being error prone when dealing with testing variable
values, string operations, or flaky subshells and pipes.
</p>

<p>
Installing <a href="https://www.shellcheck.net/">shellcheck</a> will flag you many of those ticking bombs.
</p>

<p>
No matter which editor you are using, but you should be able to
install a plugin to do automatic checks while you're editing.
</p>

<p>
In emacs' case, the package is called <a href="https://github.com/federicotdn/flymake-shellcheck">flymake-shellcheck</a>, and a
quick configuration for it is:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(use-package flymake-shellcheck
  <span style="font-weight: bold;">:ensure</span> t
  <span style="font-weight: bold;">:commands</span> flymake-shellcheck-load
  <span style="font-weight: bold;">:init</span>
  (add-hook 'sh-mode-hook 'flymake-shellcheck-load))
</pre>
</div>

<p>
Shellcheck is available on most distros, so it's just an <code>apt</code>,
<code>brew</code>, or <code>nix-env</code> away.
</p>
</div>
</div>
</div>

<div id="outline-container-org6fb003c" class="outline-2">
<h2 id="org6fb003c"><span class="section-number-2">5</span> Basics</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgb4b99eb" class="outline-3">
<h3 id="orgb4b99eb"><span class="section-number-3">5.1</span> Overview</h3>
<div class="outline-text-3" id="text-5-1">
<p>
In this section, we're covering the parts of the basics that are
not so basic after all, or that are more unique in shellscripting
languages.
</p>
</div>
</div>

<div id="outline-container-orgfeb2a18" class="outline-3">
<h3 id="orgfeb2a18"><span class="section-number-3">5.2</span> Booleans and Conditionals</h3>
<div class="outline-text-3" id="text-5-2">
<p>
In any shell, <code>foo &amp;&amp; bar</code> will execute <code>bar</code> only if <code>foo</code>
succeeded. That means that <code>foo</code> returned 0. That means that to &amp;&amp;
(which you read like "and"), 0 is true. so yes. 0 is true, and
other values are false.
</p>
</div>
</div>

<div id="outline-container-orged5671e" class="outline-3">
<h3 id="orged5671e"><span class="section-number-3">5.3</span> Functions</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Functions are functions. They receive arguments, and they return a
value.
</p>

<p>
The special thing about functions in bash is that they also can use
the file descriptors of the process. That means that they "inherit"
STDIN, STDOUT, STDERR (and maybe more).
</p>

<p>
Use them.
</p>

<p>
Another point is that function names can be passed as parameters,
because they are strings.
</p>
</div>
</div>
<div id="outline-container-org0d8652b" class="outline-3">
<h3 id="org0d8652b"><span class="section-number-3">5.4</span> Variables</h3>
<div class="outline-text-3" id="text-5-4">
<div class="org-src-container">
<pre class="src src-bash"><span style="font-weight: bold; font-style: italic;">foo</span>=3
<span style="font-weight: bold; font-style: italic;">bar</span>=$<span style="font-weight: bold; font-style: italic;">foo</span>
</pre>
</div>

<p>
You make a variable local to a function with <code>local</code>
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="font-weight: bold;">myfun</span>() {
  local bar
  <span style="font-weight: bold; font-style: italic;">bar</span>=3
  <span style="font-weight: bold;">echo</span> $<span style="font-weight: bold; font-style: italic;">bar</span>
}

<span style="font-weight: bold; font-style: italic;">bar</span>=4
<span style="font-weight: bold;">echo</span> $<span style="font-weight: bold; font-style: italic;">bar</span>
myfun
<span style="font-weight: bold;">echo</span> $<span style="font-weight: bold; font-style: italic;">bar</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0728a46" class="outline-3">
<h3 id="org0728a46"><span class="section-number-3">5.5</span> Interpolation</h3>
<div class="outline-text-3" id="text-5-5">
<div class="org-src-container">
<pre class="src src-bash"><span style="font-weight: bold; font-style: italic;">l</span>=l
<span style="font-weight: bold; font-style: italic;">s</span>=s
$<span style="font-weight: bold; font-style: italic;">l</span>$<span style="font-weight: bold; font-style: italic;">s</span> .
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org07f056a" class="outline-2">
<h2 id="org07f056a"><span class="section-number-2">6</span> interactive</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orgec830c3" class="outline-3">
<h3 id="orgec830c3"><span class="section-number-3">6.1</span> Save your small scripts</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Rome wasn't built in a day, and like having a journal log, most of
the little scripts you create, once you have enough discipline will
be useful for some other cases, and your functions will be
reusable.
</p>

<p>
Save your scripts into files early on, instead of crunching
everything in the repl.
</p>
</div>
</div>

<div id="outline-container-orge93398b" class="outline-3">
<h3 id="orge93398b"><span class="section-number-3">6.2</span> Increased Interactivity</h3>
<div class="outline-text-3" id="text-6-2">
<p>
Knowing your shell's shortcuts for interactive use is a must. The
same way you learned to touchtype and you learned your editor, you
should learn all the shortcuts for your shell. Here's some simple
ones.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">key</th>
<th scope="col" class="org-left">action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">ctrl-r</td>
<td class="org-left">reverse-history-search</td>
</tr>

<tr>
<td class="org-left">c-a</td>
<td class="org-left">beginning-of-line</td>
</tr>

<tr>
<td class="org-left">c-e</td>
<td class="org-left">end-of-line</td>
</tr>

<tr>
<td class="org-left">c-w</td>
<td class="org-left">delete-word-backwards</td>
</tr>

<tr>
<td class="org-left">c-k</td>
<td class="org-left">kill-line (from point to eol)</td>
</tr>

<tr>
<td class="org-left">c-p</td>
<td class="org-left">previous-line</td>
</tr>

<tr>
<td class="org-left">c-n</td>
<td class="org-left">next-line</td>
</tr>

<tr>
<td class="org-left">a-.</td>
<td class="org-left">insert last agument</td>
</tr>

<tr>
<td class="org-left">a-/</td>
<td class="org-left">dabbrev-expand</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-orgdd74676" class="outline-3">
<h3 id="orgdd74676"><span class="section-number-3">6.3</span> Aliases</h3>
<div class="outline-text-3" id="text-6-3">
<p>
Aliases are very simple substitutions of commands for a sequence of
other commands.  Usual example is
</p>

<div class="org-src-container">
<pre class="src src-bash">alias <span style="font-weight: bold; font-style: italic;">ls</span>=<span style="font-style: italic;">'ls --auto-color'</span>
</pre>
</div>

<p>
Now let's move on to the interesting stuff.
</p>
</div>
</div>

<div id="outline-container-org8a2ae9b" class="outline-3">
<h3 id="org8a2ae9b"><span class="section-number-3">6.4</span> functions can generate aliases</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Aliases live in a global namespace for the shell, so no matter
where you define them, they take effect globally, possibly
overwriting older aliases with the same name.
</p>

<p>
Well, it's not lexical scope (far from it), but using aliases you
can create a string that snapshots the value you want, and capture
it to run it later.
</p>

<p>
Some fun stuff:
</p>

<ul class="org-ul">
<li>aliasgen. Create an alias for each directory in
~/workspace/. This is superceeded by <code>CDPATH</code>, but the trick is
still cool.</li>
</ul>
<div class="org-src-container">
<pre class="src src-zsh">aliasgen() {
  for i in ~/workspace/*(/) ; do
      DIR=$(basename $i) ;
       alias $DIR="cd ~/workspace/$i";
  done
}
</pre>
</div>

<ul class="org-ul">
<li>a make a shortcut to the current directory.</li>
</ul>
<div class="org-src-container">
<pre class="src src-bash"><span style="font-weight: bold;">function</span> <span style="font-weight: bold;">a</span>() { alias $<span style="font-weight: bold; font-style: italic;">1</span>=cd<span style="font-style: italic;">\ </span>$<span style="font-weight: bold; font-style: italic;">PWD</span>; }
</pre>
</div>

<ul class="org-ul">
<li><p>
unhist. functions can create aliases, and functions can receive
function names (as a string), so we can combine them to advise
existing functions.
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="font-weight: bold;">unhist</span> () {
  alias $<span style="font-weight: bold; font-style: italic;">1</span>=<span style="font-style: italic;">" $1"</span>
}
unhist unhist
unhist grep
unhist rg

<span style="font-weight: bold;">noglobber</span>() {
    alias $<span style="font-weight: bold; font-style: italic;">1</span>=<span style="font-style: italic;">"noglob $1"</span>
}
noglobber http
noglobber curl
noglobber git

</pre>
</div></li>

<li>Problem: Combination of 2 of those doesn't work, because the
second acts just on the textual representation that it received,
not the current value of the alias.</li>
</ul>

<p>
Solution:
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="font-weight: bold;">alias-to</span>() {
  alias $<span style="font-weight: bold; font-style: italic;">1</span> | sed -e <span style="font-style: italic;">"s/.*='//"</span> -e <span style="font-style: italic;">"s/'\$//"</span>
}

<span style="font-weight: bold;">aliasappend</span>() {
  local cmd
  <span style="font-weight: bold;">if</span> alias $<span style="font-weight: bold; font-style: italic;">1</span> &gt;/dev/null; <span style="font-weight: bold;">then</span>
    <span style="font-weight: bold; font-style: italic;">cmd</span>=$(alias-to $<span style="font-weight: bold; font-style: italic;">1</span>)
  <span style="font-weight: bold;">else</span>
    <span style="font-weight: bold; font-style: italic;">cmd</span>=$<span style="font-weight: bold; font-style: italic;">1</span>
  <span style="font-weight: bold;">fi</span>
  <span style="font-weight: bold;">echo</span> $<span style="font-weight: bold; font-style: italic;">cmd</span>
}

<span style="font-weight: bold;">muter</span>() {
  local c
  <span style="font-weight: bold; font-style: italic;">c</span>=$(aliasappend $<span style="font-weight: bold; font-style: italic;">1</span>)
  alias $<span style="font-weight: bold; font-style: italic;">1</span>=<span style="font-style: italic;">"$c &gt;/dev/null"</span>
}

</pre>
</div>
</div>
</div>
<div id="outline-container-org74a2195" class="outline-3">
<h3 id="org74a2195"><span class="section-number-3">6.5</span> Override (advise) common functions</h3>
<div class="outline-text-3" id="text-6-5">
<div class="org-src-container">
<pre class="src src-bash">
<span style="font-weight: bold; font-style: italic;">DOCKER_ORIG</span>=$(which docker)
<span style="font-weight: bold;">docker</span> () {
    <span style="font-weight: bold;">if</span> [[ $<span style="font-weight: bold; font-style: italic;">1</span> == <span style="font-style: italic;">"run"</span> ]]; <span style="font-weight: bold;">then</span>
        <span style="font-weight: bold;">shift</span>
        $<span style="font-weight: bold; font-style: italic;">DOCKER_ORIG</span> run -v $<span style="font-weight: bold; font-style: italic;">HOME</span>/.gojira-kongs/.gojira-home/.bash_history:/root/.bash_history <span style="font-style: italic;">"$@"</span>
    <span style="font-weight: bold;">else</span>
        $<span style="font-weight: bold; font-style: italic;">DOCKER_ORIG</span> <span style="font-style: italic;">"$@"</span>
    <span style="font-weight: bold;">fi</span>
}

</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Raimon Grau</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 26.1 (<a href="https://orgmode.org">Org</a> mode 9.1.9)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
